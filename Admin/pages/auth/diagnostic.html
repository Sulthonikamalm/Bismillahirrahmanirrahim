<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnostic Test - Path Checker</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
        }

        .test-box {
            background: #2d2d2d;
            border: 2px solid #007acc;
            border-radius: 8px;
            padding: 20px;
            margin: 10px 0;
        }

        .success {
            color: #4ec9b0;
        }

        .error {
            color: #f44747;
        }

        .warning {
            color: #dcdcaa;
        }

        button {
            background: #007acc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background: #005a9e;
        }

        pre {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>

<body>
    <h1>üîç SIGAP Admin - Diagnostic Test</h1>

    <div class="test-box">
        <h2>üìç Current Location</h2>
        <pre id="currentLocation"></pre>
    </div>

    <div class="test-box">
        <h2>üß™ API Endpoint Tests</h2>
        <button onclick="testAPI('/Bismillahirrahmanirrahim/api/auth_login_debug.php')">
            Test: /Bismillahirrahmanirrahim/api/auth_login_debug.php
        </button>
        <button onclick="testAPI('../../../api/auth_login_debug.php')">
            Test: ../../../api/auth_login_debug.php
        </button>
        <button onclick="testAPI('../../../../api/auth_login_debug.php')">
            Test: ../../../../api/auth_login_debug.php
        </button>
        <pre id="apiResult"></pre>
    </div>

    <div class="test-box">
        <h2>üóÇÔ∏è File Existence Tests</h2>
        <button onclick="testFileExists('/Bismillahirrahmanirrahim/Admin/pages/cases/cases.html')">
            Test: cases.html
        </button>
        <button onclick="testFileExists('/Bismillahirrahmanirrahim/Admin/pages/blog/blog-list.html')">
            Test: blog-list.html
        </button>
        <button onclick="testFileExists('/Bismillahirrahmanirrahim/Admin/pages/auth/login.html')">
            Test: login.html
        </button>
        <pre id="fileResult"></pre>
    </div>

    <div class="test-box">
        <h2>üìä Path Resolution</h2>
        <pre id="pathResolution"></pre>
    </div>

    <script>
        // Show current location
        document.getElementById('currentLocation').textContent =
            'URL: ' + window.location.href + '\n' +
            'Pathname: ' + window.location.pathname + '\n' +
            'Origin: ' + window.location.origin;

        // Test API endpoint
        async function testAPI(endpoint) {
            const resultEl = document.getElementById('apiResult');
            resultEl.innerHTML = '<span class="warning">‚è≥ Testing: ' + endpoint + '</span>\n';

            try {
                const fullUrl = new URL(endpoint, window.location.href);
                resultEl.innerHTML += '<span class="warning">Full URL: ' + fullUrl.href + '</span>\n\n';

                const response = await fetch(endpoint, {
                    method: 'POST',
                    body: new FormData()
                });

                const text = await response.text();

                if (response.ok) {
                    resultEl.innerHTML += '<span class="success">‚úÖ SUCCESS (Status: ' + response.status + ')</span>\n';
                    resultEl.innerHTML += '<span class="success">Response Preview:</span>\n';
                    resultEl.innerHTML += text.substring(0, 500);
                } else {
                    resultEl.innerHTML += '<span class="error">‚ùå FAILED (Status: ' + response.status + ')</span>\n';
                    resultEl.innerHTML += '<span class="error">Response:</span>\n';
                    resultEl.innerHTML += text.substring(0, 500);
                }
            } catch (error) {
                resultEl.innerHTML += '<span class="error">‚ùå ERROR: ' + error.message + '</span>';
            }
        }

        // Test file existence
        async function testFileExists(path) {
            const resultEl = document.getElementById('fileResult');
            resultEl.innerHTML = '<span class="warning">‚è≥ Testing: ' + path + '</span>\n';

            try {
                const response = await fetch(path, { method: 'HEAD' });

                if (response.ok) {
                    resultEl.innerHTML += '<span class="success">‚úÖ File EXISTS (Status: ' + response.status + ')</span>\n';
                    resultEl.innerHTML += '<span class="success">Content-Type: ' + response.headers.get('Content-Type') + '</span>';
                } else {
                    resultEl.innerHTML += '<span class="error">‚ùå File NOT FOUND (Status: ' + response.status + ')</span>';
                }
            } catch (error) {
                resultEl.innerHTML += '<span class="error">‚ùå ERROR: ' + error.message + '</span>';
            }
        }

        // Show path resolution examples
        const resolutionEl = document.getElementById('pathResolution');
        const baseUrl = window.location.href;
        const examples = [
            '../cases/cases.html',
            '../../cases/cases.html',
            '../../../cases/cases.html',
            '/Bismillahirrahmanirrahim/Admin/pages/cases/cases.html'
        ];

        let resolutionText = 'Base URL: ' + baseUrl + '\n\n';
        examples.forEach(path => {
            try {
                const resolved = new URL(path, baseUrl);
                resolutionText += path + '\n  ‚Üí ' + resolved.href + '\n\n';
            } catch (e) {
                resolutionText += path + '\n  ‚Üí ERROR: ' + e.message + '\n\n';
            }
        });
        resolutionEl.textContent = resolutionText;
    </script>
</body>

</html>